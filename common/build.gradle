plugins {
	id 'org.quiltmc.loom' version '0.12.+'
	id 'eclipse'
}

archivesBaseName = "${mod_name}-Common-${minecraft_version}"

eclipse {
	project {
		name = mod_name + 'Common'
	}
}

sourceSets {
	api {
		compileClasspath += sourceSets.main.compileClasspath
	}
	main {
		java {
			compileClasspath += sourceSets.api.output
			runtimeClasspath += sourceSets.api.output
		}
	}
	testplugin {
		java {
			compileClasspath += sourceSets.main.compileClasspath
		}
	}
}

configurations {
	apiImplementation.extendsFrom(implementation)
	apiRuntimeOnly.extendsFrom(runtimeOnly)
}

dependencies {
	minecraft "com.mojang:minecraft:${minecraft_version}"
	mappings loom.officialMojangMappings()
	
	compileOnly "org.spongepowered:mixin:${mixin_version}"
	modImplementation "net.fabricmc.fabric-api:fabric-api:${fabric_version}"
	modImplementation "net.minecraftforge:forgeconfigapiport-fabric:${forgeconfigapiport_version}"
	modImplementation "mcp.mobius.waila:wthit-api:mojmap-${wthit_version}"
}

loom {
	remapArchives = false
	
	mixin {
		useLegacyMixinAp = false
	}
	
	runs {
		client {
			client()
			setConfigName("Common Client")
			ideConfigGenerated(false)
			runDir("../run")
		}
		server {
			server()
			setConfigName("Common Server")
			ideConfigGenerated(false)
			runDir("../run")
		}
	}
}
