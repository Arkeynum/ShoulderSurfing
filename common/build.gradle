plugins {
	id 'java'
	id 'eclipse'
	id 'fabric-loom'
}

tasks.withType(Jar).configureEach {
	archivesBaseName = "${mod_name}-Common"
}

java {
	sourceCompatibility = java_version
	targetCompatibility = java_version
}

eclipse {
	project {
		name = "${mod_name}Common"
	}
}

dependencies {
	minecraft "com.mojang:minecraft:${minecraft_version}"
	mappings loom.officialMojangMappings()
	
	implementation(project(":api")) {
		transitive = false
	}
	
	compileOnly "org.spongepowered:mixin:${mixin_version}"
	
	implementation "fuzs.forgeconfigapiport:forgeconfigapiport-common:${forgeconfigapiport_version}"
	implementation "mcp.mobius.waila:wthit:mojmap-${wthit_version_api}"
	implementation "curse.maven:jade-324717:${jade_version_api}"
}

loom {
	mixin {
		defaultRefmapName.set("${mod_id}.refmap.json")
		useLegacyMixinAp.set(false)
	}

	runs {
		client {
			client()
			setConfigName("${mod_name} Common Client")
			ideConfigGenerated(false)
			runDir("../run")
		}
		server {
			server()
			setConfigName("${mod_name} Common Server")
			ideConfigGenerated(false)
			runDir("../run")
		}
	}
}
